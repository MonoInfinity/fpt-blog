(()=>{"use strict";var e={284:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.http=void 0;var o=n(603),a=axios;t.http=a,a.defaults.withCredentials=!0,a.interceptors.request.use(o.requestInterceptor),a.interceptors.response.use(o.responseSuccessInterceptor,o.responseFailedInterceptor)},603:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.responseFailedInterceptor=t.responseSuccessInterceptor=t.handleCommonResponse=t.requestInterceptor=void 0;var o=n(973);function a(){var e=document.getElementById("form-btn"),t=document.getElementById("loading");t&&e&&(e.classList.remove("hidden"),e.classList.add("block"),t.classList.add("hidden"),t.classList.remove("flex"))}t.requestInterceptor=function(e){var t=document.getElementById("form-btn"),n=document.getElementById("loading"),o=document.getElementById("MESSAGEERROR"),a=document.getElementById("ERRORMESSAGEERROR");for(var i in e.data){var r=document.getElementById(i.toUpperCase()+"ERROR");r&&(r.innerHTML="")}return a&&(a.innerHTML=""),o&&(o.innerHTML=""),n&&t&&(t.classList.add("hidden"),n.classList.remove("hidden"),n.classList.add("flex")),e},t.handleCommonResponse=a,t.responseSuccessInterceptor=function(e){var t,n,i,r,d,s;if(a(),null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.details)||void 0===n?void 0:n.message){var l=document.getElementById("MESSAGEERROR");if(l){var c=null===(r=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.details)||void 0===r?void 0:r.message;l.innerHTML=c.slice(0,1).toUpperCase()+c.slice(1,c.length)}document.getElementById("toastify")&&(c=null===(s=null===(d=null==e?void 0:e.data)||void 0===d?void 0:d.details)||void 0===s?void 0:s.message,(0,o.toastify)({text:c.slice(0,1).toUpperCase()+c.slice(1,c.length),duration:4e3,newWindow:!0,close:!0,gravity:"top",position:"right",backgroundColor:"#4CAF50",avatar:"/images/check.svg",stopOnFocus:!0}))}return e},t.responseFailedInterceptor=function(e){var t,n;if(a(),null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.details){var i=e.response.data.details;for(var r in i){var d=document.getElementById(r.toUpperCase()+"ERROR"),s=document.getElementById("toastify");if(d&&(d.innerHTML=d.getAttribute("data-label")+" "+i[r]),d&&("errorMessage"===r||"message"===r)){var l=""+i[r];d.innerHTML=l.slice(0,1).toUpperCase()+l.slice(1,l.length)}!s||"errorMessage"!==r&&"message"!==r||(l=""+i[r],(0,o.toastify)({text:l.slice(0,1).toUpperCase()+l.slice(1,l.length),duration:4e3,newWindow:!0,close:!0,gravity:"top",position:"right",avatar:"/images/minus.svg",backgroundColor:"#F44336",stopOnFocus:!0}))}}return Promise.reject(e.response)}},312:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.routers=t.routerLinks=void 0,t.routerLinks={home:"/",loginForm:"/auth/login",myDraftList:"/post/me"},t.routers={category:{create:"/api/category",update:"/api/category",chart:"/api/category/chart"},post:{create:"/api/post",chart:"/api/admin/post/chart",addNewTagToPost:"/api/post/tag",getTagOfPost:function(e){return"/api/post/tag?postId="+e},save:"/api/post/save",uploadImagePost:"/api/post/image",addCategoryToPost:"/api/post/category",changePostStatus:"/api/post/status",likePost:"/api/post/like",dislikePost:"/api/post/dislike",sendPost:"/api/post/send",approvedPost:"/api/admin/post/approved",deletePost:"/api/post/delete"},user:{changePassword:"/api/user/change-password",update:"/api/user",get:"/api/user",chart:"/api/admin/user/chart",status:"/api/admin/user/status",role:"/api/admin/user/role",follow:"/api/user/follow"},tag:{getAll:"/api/tag/all",chart:"/api/tag/chart",clearUnused:"/api/tag/unused",getByName:function(e){return"/api/tag?name="+e}},auth:{login:"/api/auth/login",register:"/api/auth/register"},reward:{create:"/api/reward",update:"/api/reward",getOne:"/api/reward",chart:"/api/reward/chart",give:"/api/reward/give",delete:"/api/reward/delete",removeUserReward:"/api/reward/remove"},comment:{create:"/api/comment",getComment:"/api/comment/post",deleteComment:"/api/comment/delete",updateComment:"/api/comment",likeComment:"/api/comment/like",dislikeComment:"/api/comment/dislike"},notification:{createUser:"/api/notification",create:"/api/admin/notification",get:"/api/admin/notification"}}},973:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toastify=void 0,t.toastify=function(e){return Toastify(e).showToast()}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(()=>{var e,t=n(284),o=n(312);!function(e){e[e.DRAFT=1]="DRAFT",e[e.WAIT=2]="WAIT",e[e.APPROVED=3]="APPROVED",e[e.DENY=4]="DENY"}(e||(e={}));var a=document.getElementById("like-count"),i=document.getElementById("dislike-count"),r=document.getElementById("post-like"),d=document.getElementById("post-dislike"),s=document.getElementById("postId"),l=document.getElementById("editMyPost");null==l||l.addEventListener("click",(function(){var n={postId:s.value,status:e.DRAFT};t.http.put(o.routers.post.changePostStatus,n).then((function(e){e.data,confirm("Are you sure to change this post?")&&setTimeout((function(){window.location.assign(o.routerLinks.myDraftList)}),700)}))})),null==r||r.addEventListener("click",(function(){var e={postId:s.value};t.http.post(o.routers.post.likePost,e).then((function(e){var t,n,o=e.data,r=null!==(t=o.data.like)&&void 0!==t?t:"",d=null!==(n=o.data.dislike)&&void 0!==n?n:"";a&&(a.innerText=r),i&&(i.innerText=d)}))})),null==d||d.addEventListener("click",(function(){var e={postId:s.value};t.http.post(o.routers.post.dislikePost,e).then((function(e){var t,n,o=e.data,r=null!==(t=o.data.like)&&void 0!==t?t:"",d=null!==(n=o.data.dislike)&&void 0!==n?n:"";a&&(a.innerText=r),i&&(i.innerText=d)}))}));var c=document.getElementById("comment-btn");null==c||c.addEventListener("click",(function(){var e=document.getElementById("comment"),n=document.getElementById("postId");t.http.post(o.routers.comment.create,{content:e.value,postId:n.value}).then((function(){u()})).finally((function(){e.value=""}))}));var u=function(){var e=document.getElementById("postId"),n=document.getElementById("comment-wrapper"),a=o.routers.comment.getComment+"?postId="+e.value;t.http.get(o.routers.user.get).then((function(e){var o=e.data;t.http.get(a).then((function(e){var t=e.data;n.innerHTML="",t.data.map((function(e){var t=m(e.oriComment,o.data),a=document.createElement("div");a.classList.add("pl-2","lg:pl-4","lg:ml-4","border-l-2","border-tango-300"),e.subComments.map((function(e){a.appendChild(m(e,o.data))})),t.appendChild(a),n.appendChild(t)}))}))}))};u();var p=function(e,t){var n=document.createElement("textarea");n.classList.add("flex-1","border-none","outline-none","resize-none","focus:ring-transparent"),n.value=e;var o=document.createElement("div"),a=document.createElement("button");a.classList.add("p-2","font-semibold","text-tango-500"),a.innerText="Send",a.addEventListener("click",(function(){t(n.value)})),o.appendChild(a);var i=document.createElement("div");i.classList.add("flex","py-2","border-b","border-tango-300","fade-in");var r=document.createElement("button");return r.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.29289 4.29289C4.68342 3.90237 5.31658 3.90237 5.70711 4.29289L10 8.58579L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L11.4142 10L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L10 11.4142L5.70711 15.7071C5.31658 16.0976 4.68342 16.0976 4.29289 15.7071C3.90237 15.3166 3.90237 14.6834 4.29289 14.2929L8.58579 10L4.29289 5.70711C3.90237 5.31658 3.90237 4.68342 4.29289 4.29289Z" fill="#111827"></path>\n                                </svg>',r.addEventListener("click",(function(){i.remove()})),i.appendChild(r),i.appendChild(n),i.appendChild(o),i},m=function(e,n){var a=document.createElement("div");a.classList.add("space-y-4","fade-in");var i=document.createElement("div");if(n.userId===e.user.userId){var r=document.createElement("button");r.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.43431 3.43431C3.74673 3.12189 4.25326 3.12189 4.56568 3.43431L8 6.86863L11.4343 3.43431C11.7467 3.12189 12.2533 3.12189 12.5657 3.43431C12.8781 3.74673 12.8781 4.25326 12.5657 4.56568L9.13136 8L12.5657 11.4343C12.8781 11.7467 12.8781 12.2533 12.5657 12.5657C12.2533 12.8781 11.7467 12.8781 11.4343 12.5657L8 9.13136L4.56568 12.5657C4.25326 12.8781 3.74673 12.8781 3.43431 12.5657C3.12189 12.2533 3.12189 11.7467 3.43431 11.4343L6.86863 8L3.43431 4.56568C3.12189 4.25326 3.12189 3.74673 3.43431 3.43431Z" fill="#111827"/>\n                                </svg>',r.addEventListener("click",(function(){confirm("Do you want to delete this comment")&&t.http.put(o.routers.comment.deleteComment,{commentId:e.commentId}).then((function(){u()}))})),i.appendChild(r)}var d=document.createElement("button");d.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M6.23373 15.2917L8.81709 17.2917C9.15043 17.625 9.90043 17.7917 10.4004 17.7917H13.5671C14.5671 17.7917 15.6504 17.0417 15.9004 16.0417L17.9004 9.95834C18.3171 8.79167 17.5671 7.79165 16.3171 7.79165H12.9838C12.4838 7.79165 12.0671 7.37498 12.1504 6.79165L12.5671 4.12498C12.7338 3.37498 12.2338 2.54165 11.4838 2.29165C10.8171 2.04165 9.98376 2.37498 9.65043 2.87498L6.23373 7.95832" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>\n<path d="M1.98323 15.2916V7.12491C1.98323 5.95825 2.48323 5.54158 3.6499 5.54158H4.48323C5.6499 5.54158 6.1499 5.95825 6.1499 7.12491V15.2916C6.1499 16.4582 5.6499 16.8749 4.48323 16.8749H3.6499C2.48323 16.8749 1.98323 16.4582 1.98323 15.2916Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n',d.addEventListener("click",(function(){t.http.post(o.routers.comment.likeComment,{commentId:e.commentId}).then((function(){u()}))}));var l=document.createElement("span");l.classList.add("font-semibold","opacity-60","fade-in"),l.innerText=String(e.like);var c=document.createElement("button");c.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.7664 4.70825L11.1831 2.70825C10.8497 2.37492 10.0997 2.20825 9.59975 2.20825H6.43311C5.43311 2.20825 4.34977 2.95825 4.09977 3.95825L2.09977 10.0416C1.68311 11.2083 2.43311 12.2083 3.68311 12.2083H7.01644C7.51644 12.2083 7.93311 12.6249 7.84977 13.2083L7.43311 15.8749C7.26644 16.6249 7.76644 17.4583 8.51642 17.7083C9.18308 17.9583 10.0164 17.6249 10.3497 17.1249L13.7664 12.0416" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>\n<path d="M18.0168 4.70833V12.875C18.0168 14.0417 17.5168 14.4583 16.3501 14.4583H15.5167C14.3501 14.4583 13.8501 14.0417 13.8501 12.875V4.70833C13.8501 3.54167 14.3501 3.125 15.5167 3.125H16.3501C17.5168 3.125 18.0168 3.54167 18.0168 4.70833Z" stroke="#292D32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n',c.addEventListener("click",(function(){t.http.post(o.routers.comment.dislikeComment,{commentId:e.commentId}).then((function(){u()}))}));var m=document.createElement("span");m.classList.add("font-semibold","opacity-60","fade-in"),m.innerText=String(e.dislike),i.classList.add("flex","items-center","space-x-1"),i.appendChild(d),i.appendChild(l),i.appendChild(c),i.appendChild(m);var v='\n                     <div class="flex items-center space-x-2">\n                            <div class="w-10 h-10 overflow-hidden rounded-full">\n                                <img  src="'+e.user.avatarUrl+'" data-src="'+e.user.avatarUrl+'" alt="'+e.user.name+'" class="object-cover w-full h-full lazy">\n                            </div>\n                            <div>\n                                <a class="font-semibold" href="/user/profile?userId='+e.user.userId+'">'+e.user.name+'</a>\n                                <p class="text-xs font-medium opacity-70">'+e.createDate+"</p>\n                            </div>\n                        </div>",g=document.createElement("div");if(g.classList.add("flex","justify-end"),n.userId!==e.user.userId){var f=document.createElement("button");f.classList.add("font-semibold","p-2","text-sm"),f.innerText="Reply",f.addEventListener("click",(function(){var n=p("",(function(n){t.http.post(o.routers.comment.create,{content:n.replace(/\s{2,}/g," "),postId:s.value,oriCommentId:e.oriCommentId?e.oriCommentId:e.commentId}).then((function(){u()}))}));h.appendChild(n)})),g.appendChild(f)}var h=document.createElement("div");if(h.innerText=e.content,n.userId===e.user.userId){var C=document.createElement("button");C.classList.add("font-semibold","p-2","text-sm"),C.innerText="Edit",C.addEventListener("click",(function(){var n=p(e.content,(function(n){t.http.put(o.routers.comment.updateComment,{commentId:e.commentId,content:n}).then((function(){u()}))}));h.appendChild(n)})),g.appendChild(C)}var L=document.createElement("div");L.appendChild(h),L.appendChild(g);var E=document.createElement("div");return E.classList.add("flex","flex-col","lg:flex-row","lg:items-center","justify-between"),E.innerHTML=v,E.appendChild(i),a.appendChild(E),a.appendChild(L),a}})()})();