@using FPTBlog.Src.BlogModule.Entity
@using FPTBlog.Src.CategoryModule.Entity
@using Microsoft.AspNetCore.Html
@section Styles {
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
}


@{
    SelectList categories = (SelectList)this.ViewData["categories"];

    var blog = (Post)this.ViewData["blog"];
    var content = new HtmlString(blog.Content);

    this.ViewData["Title"] = blog.Title;
    var previewLink = $"{Routers.GetBlogPreview.Link}?blogId={blog.PostId}";
}

<div class="flex-1 py-8">

    <form class="space-y-4" id="createBlogForm">
        <div class="flex items-center justify-between">

            <h1 class="text-2xl font-semibold">Editor Post</h1>

        </div>

        @await Html.PartialAsync("../../Components/Form/FormHidden.cshtml",
        new {Name="blogId", Value=blog.PostId})
        @await Html.PartialAsync("../../Components/Form/TextField.cshtml",
        new {Name="title", Label="Title", Type="text", Value=blog.Title})

        <div class="flex space-x-2">
            @await Html.PartialAsync("../../Components/Form/FormDropList.cshtml",
            new {Name="categoryId", Label="Category", Value=blog.CategoryId, List=categories})
            @await Html.PartialAsync("../../Components/Form/FormSelectBadge.cshtml",
            new {Name="tag", Label="Tag", Value="", Placeholder ="Enter tag"})
        </div>


        <div class="flex flex-col flex-1 space-y-1">
            <p class="font-semibold">Content</p>

            <div class="">
                <div id="editor" class="flex-1 min-h-120">
                    @content
                </div>
            </div>
        </div>
        <div>
        </div>
        <div class="flex items-center space-x-4">
            @await Html.PartialAsync("../../Components/Form/FormBtn.cshtml",
            new { Label="Save Changes"})
            <a href="@previewLink" class="block p-2 font-medium text-center text-white rounded-sm bg-tango-500">
                Preview
            </a>
        </div>

    </form>
</div>

@section Scripts {
<script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
<script src="/js/image-resize.min.js"></script>
<script src="/js/blog-editor.js"></script>
}
